<!-- templates/munepit/login.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–¥–µ–ª–æ–∫</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .login-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
            width: 100%;
            max-width: 450px;
        }
        .login-header {
            background: linear-gradient(45deg, #4776E6, #8E54E9);
            color: white;
            text-align: center;
            padding: 30px;
        }
        .login-header h2 {
            margin: 0;
            font-size: 28px;
            font-weight: 600;
        }
        .login-header p {
            margin: 10px 0 0;
            opacity: 0.9;
        }
        .login-body {
            padding: 40px;
            background: white;
        }
        .form-group {
            margin-bottom: 25px;
        }
        .form-label {
            font-weight: 500;
            color: #555;
            margin-bottom: 8px;
            display: block;
        }
        .form-control {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 12px 15px;
            font-size: 16px;
            width: 100%;
            transition: all 0.3s;
        }
        .form-control:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
            outline: none;
        }
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        .radio-option {
            flex: 1;
            position: relative;
        }
        .radio-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
        .radio-option label {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .radio-option input[type="radio"]:checked + label {
            background: linear-gradient(45deg, #4776E6, #8E54E9);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(71, 118, 230, 0.3);
        }
        .radio-option input[type="radio"]:checked + label .table-icon {
            background: white;
            color: #4776E6;
        }
        .table-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 10px;
            background: #e0e0e0;
            transition: all 0.3s;
        }
        .btn-login {
            background: linear-gradient(45deg, #4776E6, #8E54E9);
            border: none;
            border-radius: 10px;
            padding: 14px 20px;
            font-size: 18px;
            font-weight: 600;
            color: white;
            width: 100%;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-login:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(71, 118, 230, 0.4);
        }
        .btn-login:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .alert {
            border-radius: 10px;
            padding: 12px 15px;
            margin-bottom: 20px;
        }
        .alert-danger {
            background-color: #fff2f0;
            color: #e74c3c;
            border-left: 4px solid #e74c3c;
        }
        .alert-success {
            background-color: #f0fff4;
            color: #27ae60;
            border-left: 4px solid #27ae60;
        }
        .footer-links {
            text-align: center;
            margin-top: 20px;
        }
        .errorlist {
            list-style: none;
            padding: 0;
            margin: 5px 0 0;
            color: #e74c3c;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6 col-xl-5">
                <div class="login-card">
                    <div class="login-header">
                        <h2>üèùÔ∏è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫</h2>
                        <p>–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã</p>
                    </div>
                    
                    <div class="login-body">
                        <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π -->
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-{{ message.tags }}">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        {% endif %}

                        <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ —Ñ–æ—Ä–º—ã -->
                        {% if form.errors %}
                            <div class="alert alert-danger">
                                <strong>–û—à–∏–±–∫–∞:</strong> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –Ω–∏–∂–µ.
                            </div>
                        {% endif %}

                        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
                        <form method="post" action="{% url 'login' %}" id="loginForm">
                            {% csrf_token %}
                            
                            <!-- –ü–æ–ª–µ –¥–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                            <div class="form-group">
                                <label for="id_username" class="form-label">
                                    <i class="bi bi-person"></i> –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                                </label>
                                <input type="text" 
                                       name="username" 
                                       id="id_username"
                                       class="form-control {% if form.username.errors %}is-invalid{% endif %}"
                                       placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"
                                       value="{{ form.username.value|default:'' }}"
                                       required>
                                {% if form.username.errors %}
                                    <div class="errorlist">
                                        {{ form.username.errors.0 }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- –í—ã–±–æ—Ä —Å—Ç–æ–ª–∞ - –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏ -->
                            <div class="form-group">
                                <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ª</label>
                                <div class="radio-group">
                                    <div class="radio-option">
                                        <input type="radio" 
                                               name="table" 
                                               id="id_table_island" 
                                               value="island"
                                               {% if form.table.value == 'island' %}checked{% endif %}
                                               required>
                                        <label for="id_table_island">
                                            <span class="table-icon">üèùÔ∏è</span>
                                            <span>–û—Å—Ç—Ä–æ–≤</span>
                                        </label>
                                    </div>
                                    
                                    <div class="radio-option">
                                        <input type="radio" 
                                               name="table" 
                                               id="id_table_britain" 
                                               value="britain"
                                               {% if form.table.value == 'britain' %}checked{% endif %}
                                               required>
                                        <label for="id_table_britain">
                                            <span class="table-icon">üá¨üáß</span>
                                            <span>–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è</span>
                                        </label>
                                    </div>
                                </div>
                                {% if form.table.errors %}
                                    <div class="errorlist">
                                        {{ form.table.errors.0 }}
                                    </div>
                                {% endif %}
                            </div>

                            <!-- –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ -->
                            <button type="submit" class="btn-login" id="submitBtn">
                                –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                            </button>
                        </form>

                        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="footer-links">
                            <p class="text-muted mt-3 mb-0">
                                <small>
                                    –î–µ–º–æ-–≤–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–¥–µ–ª–æ–∫<br>
                                    –î–ª—è –≤—Ö–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–µ –∏–º—è
                                </small>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–æ–ª–∞—Ö -->
                <div class="row mt-4 g-3">
                    <div class="col-6">
                        <div class="card bg-light border-0 h-100">
                            <div class="card-body text-center p-3">
                                <h5 class="card-title">üèùÔ∏è –û—Å—Ç—Ä–æ–≤</h5>
                                <p class="card-text small mb-0">
                                    –ü–æ–∫—É–ø–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤<br>
                                    –ü–æ—Å—Ç—Ä–æ–π–∫–∞ –∑–¥–∞–Ω–∏–π<br>
                                    –°—É–¥ –∏ –∫–∞—Ç–æ—Ä–≥–∞
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card bg-light border-0 h-100">
                            <div class="card-body text-center p-3">
                                <h5 class="card-title">üá¨üáß –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è</h5>
                                <p class="card-text small mb-0">
                                    –ü—Ä–æ–¥–∞–∂–∞ —Ç–æ–≤–∞—Ä–æ–≤<br>
                                    –ö—Ä–µ–¥–∏—Ç—ã –∏ –∫–∞–ø–µ—Ä—ã<br>
                                    –†–∞–±–æ—Ç–∞ –Ω–∞ –∑–∞–≤–æ–¥–µ
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    
    <!-- JavaScript –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º—ã -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('loginForm');
            const usernameInput = document.getElementById('id_username');
            const radioButtons = document.querySelectorAll('input[name="table"]');
            const submitBtn = document.getElementById('submitBtn');
            
            // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º—ã
            function checkFormValidity() {
                const usernameValid = usernameInput.value.trim() !== '';
                const tableSelected = Array.from(radioButtons).some(radio => radio.checked);
                
                submitBtn.disabled = !(usernameValid && tableSelected);
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            usernameInput.addEventListener('input', checkFormValidity);
            
            radioButtons.forEach(radio => {
                radio.addEventListener('change', checkFormValidity);
            });
            
            // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
            checkFormValidity();
            
            // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ - –≤—ã–≤–æ–¥–∏–º –≤ –∫–æ–Ω—Å–æ–ª—å
            console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            console.log('–†–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∏:', radioButtons.length);
        });
    </script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>